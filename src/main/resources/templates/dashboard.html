<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head" />

<body>
    <script th:inline="javascript">
        var products = /*[[${products}]]*/ null;
                console.log(products);
            </script>

    <script id="productItem" type="text/x-handlebars-template">
        <li class="product">
        <img src="{{{image}}}" alt="picture of product" class="product__image">
        <div class="product__data">
            <h2 class="product__title">
                {{{name}}}
            </h2>
            <h4 class="product__code">BARCODE:{{{id}}} </h4>
        </div>
        <div class="product__quantity">
            <button class="btn btn-minus fas fa-minus" type="button" name="minus"></button>
            <input class="quantity__input" type="text" name="quantity" value="1">
            <button class="btn btn-plus fas fa-plus" type="button" name="plus"></button>
        </div>
        <div class="product__price">
            <p class="price__label">Price</p>
            <p class="price__value">{{{price}}}</p>
        </div>
        <button class="btn btn-delete far fa-trash-alt"></button>
    </li>
</script>

    <div class="app-container">
        <header th:replace="fragments/navbar ::header" />
        <div class="main">
            <div class="container">
                <div class="wrapper">
                    <div class="products__container -dashboard">
                        <form autocomplete="off" action="#" th:action="@{admin/addNewProduct}" th:object="${product}"
                            method="post" class="form-add-product" role="form">
                            <div class="form-add-product__wrapper">
                                <div class="form-add-product__group">
                                    <input type="number" step="any" min="0" th:field="*{id}" placeholder="Product barcode"
                                        class="form-add-product__input" />
                                    <label th:if="${#fields.hasErrors('id')}" th:errors="*{id}" class="validation-message"></label>
                                </div>
                                <div class="form-add-product__group">
                                    <label th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="validation-message"></label>
                                    <input type="text" th:field="*{name}" placeholder="Name of the product" class="form-add-product__input" />
                                </div>

                                <div class="form-add-product__group">
                                    <label th:if="${#fields.hasErrors('stock')}" th:errors="*{stock}" class="validation-message"></label>
                                    <input type="number" step="any" min="0" th:field="*{stock}" placeholder="Stock available"
                                        class="form-add-product__input" />
                                </div>
                                <div class="form-add-product__group">
                                    <input type="number" step="any" min="0" th:field="*{price}" placeholder="Price"
                                        class="form-add-product__input" />
                                    <label th:if="${#fields.hasErrors('price')}" th:errors="*{price}" class="validation-message"></label>
                                </div>

                                <div class="form-add-product__group">
                                    <input id="imageUUID" type="hidden" th:field="*{image}" />
                                    <input id="imageSelect" type="file" accept="image/png, image/jpeg" placeholder="Image"
                                        class="form-add-product__input" />
                                    <label th:if="${#fields.hasErrors('image')}" th:errors="*{image}" class="validation-message"></label>
                                </div>

                                <div class="form-add-product__group">
                                    <button type="submit" class="btn -tiny">Add Product</button>
                                </div>
                            </div>
                            <span th:utext="${successMessage}"></span>
                        </form>
                        <ul class="products__list -dashboard">
                            <th:block th:each="product :${products}">
                                <li class="product">
                                    <img th:src="${product.image}" alt="picture of product" class="product__image">
                                    <div class="product__data">
                                        <h2 class="product__title" th:text="${product.name}" />
                                        <h4 class="product__code" th:text="'BARCODE:'+${product.id}" />
                                    </div>
                                    <div class="product__quantity">
                                        <button class="btn btn-minus fas fa-minus" type="button" name="minus"></button>
                                        <input class="quantity__input" type="text" name="quantity" value="1">
                                        <button class="btn btn-plus fas fa-plus" type="button" name="plus"></button>
                                    </div>
                                    <div class="product__price">
                                        <p class="price__label">Price</p>
                                        <p class="price__value" th:text="${product.price}" />
                                    </div>
                                    <button class="btn"> AICI TRE SA FIE UN BUTON DE ADAUGA</button>
                                </li>
                            </th:block>
                        </ul>
                    </div>
                    <div class="action">
                        <div class="modal" id="js-add-coupon">
                            <button class="close-button" onclick="document.getElementById('js-add-coupon').style.display='none'">Close</button>
                            <div class="modal__content">
                                <div class="modal__form">
                                    <input class="modal__input" name="coupon-code" type="text" placeholder="Insert Coupon Code"
                                        required>
                                    <input class="modal__input" name="coupon-discount" type="text" placeholder="Insert Discount"
                                        required>
                                    <input class="modal__input -date" name="coupon-date" type="date" required>
                                    <div class="modal__action-wrapper">
                                        <button class="btn -small js-confirm-coupon" type="submit">Add</button>
                                    </div>
                                    <label id="coupon-message" />
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="document.getElementById('js-add-coupon').style.display='block'">Add
                            Coupons</button>
                        <button class="btn ">Button2</button>
                        <button class="btn ">Button3</button>
                        <button class="btn ">Button4</button>
                        <button class="btn ">Button5</button>
                        <button class="btn btn-delete -huge js-delete-all js-btn-delete-all">Delete All</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="fragments/footer :: footer" />
    <script th:src="@{/build/js/addProduct.js}"></script>
    <script th:src="@{/build/js/addCoupon.js}"></script>
    <script th:src="@{/build/js/allProducts.js}"></script>
</body>

</html>